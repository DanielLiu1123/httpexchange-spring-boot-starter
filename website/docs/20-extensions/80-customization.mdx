---
sidebar_position: 80
---

# Customization

This library is designed to be highly customizable. You can customize the behavior of the library by providing your own implementations.

## Custom [HttpServiceArgumentResolver](https://docs.spring.io/spring-framework/docs/current//javadoc-api/org/springframework/web/service/invoker/class-use/HttpServiceArgumentResolver.html)

```java
@Bean
HttpServiceArgumentResolver yourHttpServiceArgumentResolver() {
  return new YourHttpServiceArgumentResolver();
}
```

Auto-detect all the `HttpServiceArgumentResolver` beans, then apply them to build the `HttpServiceProxyFactory`.

## Change Client Type

There are many adapters for HttpExchange client: `RestClientAdapter`, `WebClientAdapter` and `RestTemplateAdapter`.

```yaml title="application.yml"
http-exchange:
  client-type: REST_CLIENT
```

The framework will choose the appropriate adapter according to the http client interface.
If any method in the interface returns a reactive type (Mono/Flux), then `WebClient` will be used, otherwise `RestClient` will be used.
**In most cases, you don't need to explicitly specify the client type.**

:::warning
The `connectTimeout` settings are not supported by `WEB_CLIENT`.
:::

## HttpClientCustomizer

Using [`HttpClientCustomizer`](https://github.com/DanielLiu1123/httpexchange-spring-boot-starter/blob/main/httpexchange-spring-boot-autoconfigure/src/main/java/io/github/danielliu1123/httpexchange/HttpClientCustomizer.java),
you can more freely customize the underlying Http client, such as setting up a proxy, setting up SSL, etc.

```java
// For RestClient
@Bean
HttpClientCustomizer.RestClientCustomizer restClientCustomizer() {
    return (restClientBuilder, channel) -> {
        if (Objects.equals(channel.getName(), "whichChannelYouWantToCustomize")) {
            var httpClient = HttpClient.newBuilder().build();
            restClientBuilder.requestFactory(new JdkClientHttpRequestFactory(httpClient));
        }
    };
}
```

```java
// For RestTemplate
@Bean
HttpClientCustomizer.RestTemplateCustomizer restTemplateCustomizer() {
    return (restTemplate, channel) -> {
        if (Objects.equals(channel.getName(), "whichChannelYouWantToCustomize")) {
            var httpClient = HttpClient.newBuilder().build();
            restTemplate.setRequestFactory(new JdkClientHttpRequestFactory(httpClient));
        }
    };
}
```

```java
// For WebClient
@Bean
HttpClientCustomizer.WebClientCustomizer webClientCustomizer() {
    return (webClientBuilder, channel) -> {
        if (Objects.equals(channel.getName(), "whichChannelYouWantToCustomize")) {
            var httpClient = HttpClient.newBuilder().build();
            webClientBuilder.clientConnector(new JdkClientHttpConnector(httpClient));
        }
    };
}
```
