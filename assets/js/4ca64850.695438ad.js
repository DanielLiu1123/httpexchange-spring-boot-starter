"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[252],{9672:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=n(7624),s=n(2172);const r={sidebar_position:100},o="Set Read Timeout Dynamically",a={id:"extensions/set-read-timeout-dynamically",title:"Set Read Timeout Dynamically",description:"Spring does not provide a way to set the read timeout dynamically. This framework provides EnhancedJdkClientHttpRequestFactory to support this feature.",source:"@site/docs/extensions/set-read-timeout-dynamically.mdx",sourceDirName:"extensions",slug:"/extensions/set-read-timeout-dynamically",permalink:"/httpexchange-spring-boot-starter/docs/extensions/set-read-timeout-dynamically",draft:!1,unlisted:!1,editUrl:"https://github.com/DanielLiu1123/httpexchange-spring-boot-starter/tree/main/docs/docs/extensions/set-read-timeout-dynamically.mdx",tags:[],version:"current",sidebarPosition:100,frontMatter:{sidebar_position:100},sidebar:"tutorialSidebar",previous:{title:"Dynamic Refresh",permalink:"/httpexchange-spring-boot-starter/docs/extensions/dynamic-refresh"},next:{title:"Url Variables",permalink:"/httpexchange-spring-boot-starter/docs/extensions/url-variables"}},c={},d=[{value:"Use <code>RequestConfigurator</code> Interface",id:"use-requestconfigurator-interface",level:2},{value:"Use <code>Requester</code> Class",id:"use-requester-class",level:2},{value:"Reactive Client",id:"reactive-client",level:2}];function l(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"set-read-timeout-dynamically",children:"Set Read Timeout Dynamically"}),"\n",(0,i.jsxs)(t.p,{children:["Spring does not provide a way to set the read timeout dynamically. This framework provides ",(0,i.jsx)(t.code,{children:"EnhancedJdkClientHttpRequestFactory"})," to support this feature."]}),"\n",(0,i.jsx)(t.p,{children:"There are two ways to set the read timeout dynamically."}),"\n",(0,i.jsxs)(t.h2,{id:"use-requestconfigurator-interface",children:["Use ",(0,i.jsx)(t.code,{children:"RequestConfigurator"})," Interface"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'@HttpExchange("/users")\ninterface UserApi extends RequestConfigurator<UserApi> {\n    @GetExchange\n    List<User> list();\n}\n\n@Service\nclass UserService {\n    @Autowired\n    UserApi userApi;\n\n    List<User> listWithTimeout(int timeout) {\n        return userApi.withTimeout(timeout).list();\n    }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Each time the ",(0,i.jsx)(t.code,{children:"RequestConfigurator"})," method is called, a new proxy client will be created,\nand it inherits the original configuration and will not affect the original configuration."]}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"RequestConfigurator"})," is suitable for client-side use but not for defining a neutral API.\nTherefore, ",(0,i.jsx)(t.code,{children:"Requester"})," is provided for a programmatic way to dynamically set the read timeout."]})}),"\n",(0,i.jsxs)(t.h2,{id:"use-requester-class",children:["Use ",(0,i.jsx)(t.code,{children:"Requester"})," Class"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'List<User> users = Requester.create()\n                        .withTimeout(10000)\n                        .addHeader("X-Foo", "bar")\n                        .call(() -> userApi.list());\n'})}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["This feature needs to use ",(0,i.jsx)(t.code,{children:"EnhancedJdkClientHttpRequestFactory"})," as the ",(0,i.jsx)(t.code,{children:"ClientHttpRequestFactory"})," implementation,\nand this is the default behavior."]})}),"\n",(0,i.jsx)(t.h2,{id:"reactive-client",children:"Reactive Client"}),"\n",(0,i.jsxs)(t.p,{children:["For ",(0,i.jsx)(t.code,{children:"WebClient"})," client type, use ",(0,i.jsx)(t.code,{children:"timeout"})," method to set the read timeout for each request."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"Flux<User> users = userApi.list().timeout(Duration.ofSeconds(10));\n"})})]})}function u(e={}){const{wrapper:t}={...(0,s.M)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},2172:(e,t,n)=>{n.d(t,{I:()=>a,M:()=>o});var i=n(1504);const s={},r=i.createContext(s);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);